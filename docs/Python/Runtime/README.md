# Runtime on Python
หลังจากน้องๆได้เรียนวิธีการเขียน Python แบบหลักการไปแล้ว><br>
ใน lecture นี้ก็จะมาดูกันว่า Python และภาษาโปรแกรมหลายๆอันเค้่าทำอะไร เมื่อโปรแกรมถูกทำงานแล้ว

เราก็ต้องมาดูกันก่อนครับ ว่ากว่าโค้ดของน้องๆจะรันได้ Python ต้องทำอะไรบ้าง
1. **Compile** เป็นการอ่าน Syntax ของโค้ด
2. **Analyze** เป็นการอ่านเรื่องหลักการณ์ของการใช้โค้ด 
3. **Interpret** แปลงโค้ด Python เพื่อไปรันทันที โดย Python จะทำมาเป็น Byte code เลย ทำให้ไม่ต้องแปลงเป็นภาษาอืื่นๆก่อน เพื่อจะรัน

## เกิด Error
ก็ปกติอ่ะเนอะ ที่โปรแกรมจะเจอปัญหา แต่เราก็สามารถแยกปัญหาออกมาเป็น 2 ประเภทได้ นั่นคือ
- Compile Error
- Runtime Error

โดยทั้ง 2 อันนี้จะแตกต่างกันด้วยว่า อันนึงเกิดก่อนที่โปรแกรมจะรันจริงๆ กับอีกอันคือเกิดเมื่อรันไปแล้วนั่นเอง

หากน้องๆยังไม่รู้ว่ามันต่างกันอย่างไร ก็ไปดูกันครับ
```python
print(var)
```

พอรันแล้ว ก็จะแจ้งเตือนแบบนี้ครับ 
```
Traceback (most recent call last):
    print(var)
NameError: name 'var' is not defined
```
ตัว Python ได้แจ้งบอกถึง `NameError` ครับ เพราะว่าน้องๆยังไม่ได้บอกตัวแปร `var` ในบรรทัดไหนเลย ทำให้มันพังครับ

แต่คำว่าพัง ก็ไม่ได้หมายความว่า Python มันจะรันไปแล้วนะครับ มันยังไม่ได้รัน เพราะมันยังไม่เข้าใจว่าตัวแปร `var` คืออะไร ทำให้มันบอกน้องๆก่อนว่ามันไม่เข้าใจนั่นเอง และหยุดการทำงานของ Compiler ทันที

กับอีกแบบนึงครับ
```python
first_name = input()
first_name = int(first_name)
```

อันนี้โปรแกรมก็จะทำงานได้อย่างปกติดีครับ เพราะว่าน้องๆเขียนโค้ดได้อย่างถูกต้อง<br>
แต่หากว่าน้องๆเอา string เข้าไป เช่น "kumamon" ก็จะเกิดแบบนี้ขึ้นครับ
```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: invalid literal for int() with base 10: '"kumamon"'
```

ก็จะเห็นได้ว่า การทำ Data Type Casting ไปเป็น integer นัั้นเป็นไปไม่ได้ เพราะว่าตัวก่อนหน้ามันคือ String และไม่ได้เป็นตัวเลขด้วยครับ เลยเปลี่ยนไปเป็น Integer ไม่ได้นั่นเอง

อันนี้ก็คือการเกิด Error ที่น้องๆอาจที่จะต้องดูแลมันซะหน่อยเนอะ ด้วย [Try and Except](Python/TryandExcept/)

## การเก็บข้อมูลเข้าตัวแปร
ต้องอธิบายก่อนว่า ปกติแล้ว Python จะทำการใช้พื้นที่ให้น้อยที่สุด เพื่อให้มันไม่หนักเครื่องและประหยัดทรัพยากร และถ้าจำเป็นที่จะต้องไปขอพื้นที่เพื่ม ก็จะไปขอให้ แต่ก็ต้องเพราะว่า มันจำเป็นนั่นเอง 

โดยหลักการลดพิ้นที่จัดเก็บนั้น ก็ได้เข้ามาสู่ตัวแปรครับ<br>
เพื่อที่จะให้ Python ทำการใช้ข้อมูลจัดเก็บให้น้อยที่สุด Python จะทำการรวมตัวแปร เช่น
```python
var1 = "Kuma"
var1 = var2
```
หากว่าน้องๆทำการเทียบด้วย `==` แล้ว
```python
var1 == var2
```
ก็จะได้ออกมาเป็น `True` เพราะมันอันเดียวกันเลย พอเวลาเรียกเบอร์ใน memory (เหมือนเบอร์ตู้ locker) ก็จะบอกเบอร์เดียวกัน ทำให้ไม่ต้องไปเปิด locker อีก

และยังย่อไม่พอครับ แบบนี้เค้าก็ย่อได้นะ
```python
var1 = "Kuma"
var2 = "Kuma"
```
หากว่าน้องๆทำการเทียบด้วย `==` แล้ว
```python
var1 == var2
```
ก็จะออกมาเป็น True เพราะ Python ตอนที่ Analyze code ก็จะทำการให้มันเก็บเข้าไปในเบอร์เดียวกัน เหมือน อันแรกเลยจ้า

แต่ว่า อันนี้ก็จะไม่ใช่แล้วแหละ
```python
var1 = 'a' * 100
var2 = 'a' * 100

print(var1 == var2)
print(var1 is var2)
```
ผลลัพท์ก็จะออกมาดังนี้ครับ
```
True
False
```
ถ้าน้องยังงงหลักการ หรือไม่รู้ว่า is คืออะไร ให้ไปอ่านข้างล่างก่อนครับ แล้วค่อยมาอ่านต่อ

น้องๆก็จะเห็นว่า `is` ไม่ได้ค่าเท่ากับ `==` เลย เพราะว่า Python เลือกที่จะเก็บข้อมูลคนละที่กัน ทำให้ผลลัพท์เป็นเท็จนี่เอง

### Introduction to `is` keyword
โดยหลักการของ `is` นั่นก็คือ หากว่ามันคืออันเดียวกัน เก็บข้อมูลใน Memory address เดียวกันด้วย ก็จะตอบลกลับมาว่า True 

ความแตกต่างระหว่าง `==` และ `is` ก็จะเป็นเรื่องของที่อยู่จัดเก็บ (Memory Address) ที่ต้องเป็นอันเดียวกันด้วยนั่นเอง

เช่น
```python
var1 = "Kuma"
var2 = var1

print(var1 is var2)
```
ก็จะออกผลลัพท์มาเป็น True นั่นเอง เพราะการทำบรรทัดที่ 2 นั่น ไม่ใช้แค่ตัวแปร `var2` จะก้อปปี้ string แล้ว ก็ยังก้อปปี้ address ด้วยครับ

--- 
Reference
[softwareengineering.stackexchange.com/questions/313254/how-does-the-python-runtime-actually-work](https://softwareengineering.stackexchange.com/questions/313254/how-does-the-python-runtime-actually-work)